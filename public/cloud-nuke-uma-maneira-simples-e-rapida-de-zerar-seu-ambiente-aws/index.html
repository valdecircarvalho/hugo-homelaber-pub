<!DOCTYPE html>
<html lang="en">
  <head>
    
      <title>Cloud Nuke - Uma maneira simples e rápida de zerar seu ambiente AWS :: Blog Homelaber Brasil |  — Homelab·Infraestrutura de TI· Cloud Computing· DevOps</title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="Olá Homelabers!
Como eu ando brincando e estudando bastante sobre Terraform (tem post sobre isso vindo ai) tenho criado muitos recursos na AWS e outro dia por descuido deixei algumas instâncias rodando lá de bobeira. E claro, só percebi quando chegou a fatura - sorte que eram instâncias pequenas e o rombo não foi muito alto.
Fuçando na internet, encontrei um artigo falando sobre um programinha criado pelo Toni Solarin-Sodara (@tonerdo) da Gruntwork (@gruntwork_io) chamado Cloud Nuke."/>
<meta name="keywords" content=""/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="/cloud-nuke-uma-maneira-simples-e-rapida-de-zerar-seu-ambiente-aws/" />





<link rel="stylesheet" href="/assets/style.css">


<link rel="stylesheet" href="/style.css">


<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/apple-touch-icon-144-precomposed.png">
<link rel="shortcut icon" href="/img/favicon.png">


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Cloud Nuke - Uma maneira simples e rápida de zerar seu ambiente AWS"/>
<meta name="twitter:description" content="Olá Homelabers!
Como eu ando brincando e estudando bastante sobre Terraform (tem post sobre isso vindo ai) tenho criado muitos recursos na AWS e outro dia por descuido deixei algumas instâncias rodando lá de bobeira. E claro, só percebi quando chegou a fatura - sorte que eram instâncias pequenas e o rombo não foi muito alto.
Fuçando na internet, encontrei um artigo falando sobre um programinha criado pelo Toni Solarin-Sodara (@tonerdo) da Gruntwork (@gruntwork_io) chamado Cloud Nuke."/>



<meta property="og:title" content="Cloud Nuke - Uma maneira simples e rápida de zerar seu ambiente AWS" />
<meta property="og:description" content="Olá Homelabers!
Como eu ando brincando e estudando bastante sobre Terraform (tem post sobre isso vindo ai) tenho criado muitos recursos na AWS e outro dia por descuido deixei algumas instâncias rodando lá de bobeira. E claro, só percebi quando chegou a fatura - sorte que eram instâncias pequenas e o rombo não foi muito alto.
Fuçando na internet, encontrei um artigo falando sobre um programinha criado pelo Toni Solarin-Sodara (@tonerdo) da Gruntwork (@gruntwork_io) chamado Cloud Nuke." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/cloud-nuke-uma-maneira-simples-e-rapida-de-zerar-seu-ambiente-aws/" />
<meta property="article:published_time" content="2019-04-17T11:00:36+00:00" />
<meta property="article:modified_time" content="2019-04-17T11:00:36+00:00" /><meta property="og:site_name" content="Blog Homelaber Brasil | " />






  </head>
  <body class="">
    <div class="container">
      <header class="header">
  <span class="header__inner">
    <a href="/" class="logo" style="text-decoration: none;">
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44">
  <path fill="none" d="M15 8l14.729 14.382L15 35.367"/>
</svg>
</span>
    <span class="logo__text">Homelaber Brasil</span>
    <span class="logo__cursor"></span>
  
</a>

    <span class="header__right">
      
        <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/archive">arquivo</a></li>
        
      
        
          <li><a href="/sobre">sobre</a></li>
        
      
        
          <li><a href="https://github.com/valdecircarvalho/">github</a></li>
        
      
        
          <li><a href="https://twitter.com/homelaber">@homelaber</a></li>
        
      
      
    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/archive">arquivo</a></li>
      
    
      
        <li><a href="/sobre">sobre</a></li>
      
    
      
        <li><a href="https://github.com/valdecircarvalho/">github</a></li>
      
    
      
        <li><a href="https://twitter.com/homelaber">@homelaber</a></li>
      
    
  </ul>
</nav>

        <span class="menu-trigger">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0z" fill="none"/>
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
          </svg>
        </span>
      
      <span class="theme-toggle">
        <svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>

      </span>
    </span>
  </span>
</header>


      <div class="content">
        
  <div class="post">
    <h2 class="post-title"><a href="/cloud-nuke-uma-maneira-simples-e-rapida-de-zerar-seu-ambiente-aws/">Cloud Nuke - Uma maneira simples e rápida de zerar seu ambiente AWS</a></h2>
    <div class="post-meta">
      
        <span class="post-date">
            17-04-2019
        </span>
      
      <span class="post-author">— Written by Valdecir Carvalho</span>
      
        <span class="post-read-time">— 3 min lendo</span>
      
    </div>

    
      <span class="post-tags">
        
          #<a href="/tags/gruntwork_io/">@gruntwork_io</a>&nbsp;
        
          #<a href="/tags/amazon-aws/">Amazon AWS</a>&nbsp;
        
          #<a href="/tags/aws/">aws</a>&nbsp;
        
          #<a href="/tags/aws-brasil/">aws brasil</a>&nbsp;
        
          #<a href="/tags/blog/">blog</a>&nbsp;
        
          #<a href="/tags/cloud/">cloud</a>&nbsp;
        
          #<a href="/tags/cloud-nuke/">cloud-nuke</a>&nbsp;
        
          #<a href="/tags/ec2/">ec2</a>&nbsp;
        
          #<a href="/tags/ferramenta/">ferramenta</a>&nbsp;
        
          #<a href="/tags/gruntwork/">Gruntwork</a>&nbsp;
        
          #<a href="/tags/open-source/">open source</a>&nbsp;
        
          #<a href="/tags/tool/">tool</a>&nbsp;
        
      </span>
    

    

    <div class="post-content">
      <p>Olá Homelabers!</p>
<p>Como eu ando brincando e estudando bastante sobre Terraform (tem post sobre isso vindo ai) tenho criado muitos recursos na AWS e outro dia por descuido deixei algumas instâncias rodando lá de bobeira. E claro, só percebi quando chegou a fatura - sorte que eram instâncias pequenas e o rombo não foi muito alto.</p>
<p>Fuçando na internet, encontrei um <a href="https://blog.gruntwork.io/cloud-nuke-how-we-reduced-our-aws-bill-by-85-f3aced4e5876">artigo</a> falando sobre um programinha criado pelo Toni Solarin-Sodara (@tonerdo)  da <a href="https://www.gruntwork.io/">Gruntwork</a> (@gruntwork_io) chamado <a href="https://github.com/gruntwork-io/cloud-nuke">Cloud Nuke</a>.</p>
<p>O que o Cloud-Nuke faz é basicamente jogar uma BOMBA no seu ambiente e deleta TUDO o que você tem provisionado na AWS.</p>
<p><img src="/imagens/2019/04/atomic_bomb-nuke-644x429.jpg" alt=""></p>
<p><strong>AVISO: ESTA FERRAMENTA É ALTAMENTE DESTRUTIVA, TODOS OS RECURSOS EXISTENTES SERÃO APAGADOS. SEUS EFEITOS SÃO IRREVERSÍVEIS E NUNCA DEVEM SER UTILIZADOS EM UM AMBIENTE DE PRODUÇÃO!!!</strong></p>
<h3 id="mas-então-quando-eu-vou-usar-o-cloud-nuke">Mas então quando eu vou usar o Cloud-Nuke?</h3>
<p>Justamente para aqueles casos onde você tem um ambiente de testes na AWS e fica criando e excluindo recursos, o Cloud-Nuke vai te ajudar a limpar todos os recursos e não deixar nada para trás ligado.</p>
<h3 id="instalação">Instalação:</h3>
<p>Instalar o Cloud-Nuke é muito simples:</p>
<pre><code>  * Baixe o último binário para o seu sistema operacional no repositório.
  * Mova o binário para uma pasta no seu PATH. Ex. : $ _mv cloud-nuke_darwin_amd64 / usr / local / bin / cloud-nuke_.
  * Adicione permissões de execução ao binário. Ex.: $ _chmod u + x / usr / local / bin / cloud-nuke_.
  * Teste a instalação executando o comando: $ _cloud-nuke --help_.
</code></pre>
<h3 id="como-usar">Como usar:</h3>
<p>Para usar o Cloud-Nuke, primeiramente você precisa configurar suas credenciais na AWS utilizando o <a href="https://docs.aws.amazon.com/pt_br/cli/">AWS CLI</a> <a href="http://docs.aws.amazon.com/cli/latest/userguide/cli-chap-getting-started.html">assim</a>.</p>
<p>Depois basta usar os comandos abaixo:</p>
<pre><code>  * _$ cloud-nuke aws_ - esse comando vai iniciar o processo de zerar TODO o seu ambiente AWS. E não tem volta!!!
  * _$ cloud-nuke aws --exclude-region ap-south-1 --exclude-region ap-south-2 _- esse comando vai excluir tudo o que existir nas regiões ap-south-1 e ap-south-2
  * _$ cloud-nuke aws --older-than 24h_ - esse comando vai excluir tudo o que foi criado antes de um certo período, no caso do exemplo, tudo o que for mais antigo do que 24 horas será eliminado. Você pode ver o formato utilizado no comando [aqui](https://golang.org/pkg/time/#ParseDuration)
</code></pre>
<h3 id="na-prática">Na prática:</h3>
<p>Nesse exemplo, eu tinha 5 instâncias EC2 rodando na AWS e utilizei o Cloud-Nuke para DETONAR com tudo.</p>
<p><img src="/imagens/2019/04/cloud-nuke-aws-644x371.gif" alt=""></p>
<pre><code>INFO[2019-04-16T00:24:13-03:00] Terminating 5 resources in batches
INFO[2019-04-16T00:24:13-03:00] Terminating all EC2 instances in region us-east-1
INFO[2019-04-16T00:24:44-03:00] Terminated EC2 Instance: i-05d9c82d58a4768e3
INFO[2019-04-16T00:24:44-03:00] Terminated EC2 Instance: i-0e28614621a19d79a
INFO[2019-04-16T00:24:44-03:00] Terminated EC2 Instance: i-014f6cedb2fc6a61f
INFO[2019-04-16T00:24:44-03:00] Terminated EC2 Instance: i-0a7fe66e11b6069f9
INFO[2019-04-16T00:24:44-03:00] Terminated EC2 Instance: i-010bec6a821d6eb95
INFO[2019-04-16T00:24:44-03:00] [OK] 5 instance(s) terminated in us-east-1
INFO[2019-04-16T00:24:44-03:00] Terminating 5 resources in batches
INFO[2019-04-16T00:24:44-03:00] Deleting all EBS volumes in region us-east-1
INFO[2019-04-16T00:24:44-03:00] EBS volume vol-0016ecaf21901aaa4 has already been deleted
INFO[2019-04-16T00:24:45-03:00] EBS volume vol-08ee9cb1cca7549a8 has already been deleted
INFO[2019-04-16T00:24:46-03:00] EBS volume vol-03fa7173192df32e9 has already been deleted
INFO[2019-04-16T00:24:46-03:00] EBS volume vol-07ab7c8dc56ede046 has already been deleted
INFO[2019-04-16T00:24:47-03:00] EBS volume vol-0e54bf2aaff25275e has already been deleted
INFO[2019-04-16T00:24:47-03:00] [OK] 0 EBS volumes(s) terminated in us-east-1
INFO[2019-04-16T00:24:47-03:00] Terminating 0 resources in batches
INFO[2019-04-16T00:24:47-03:00] Terminating 0 resources in batches
</code></pre>
<p>Para finalizar, o Cloud-Nuke é uma excelente ferramenta, mas deve ser utilizada com MUITO CUIDADO, mas que deve estar no seu cinto de utilidades para casos em que você precisa rapidamente destruir um ambiente na AWS.</p>
<p>Deixe ai nos comentários, se você já usou o Cloud-Nuke ou se você acha que será uma ferramenta útil para você.</p>

    </div>
    
      
        <div class="pagination">
          <div class="pagination__title">
            <span class="pagination__title-h">Leia outros posts</span>
            <hr />
          </div>
          <div class="pagination__buttons">
            
              <span class="button previous">
                <a href="/novos-desafios-a-frente/">
                  <span class="button__icon">←</span>
                  <span class="button__text">Novos desafios a frente…</span>
                </a>
              </span>
            
            
              <span class="button next">
                <a href="/32-evento-aws-user-group-sao-paulo/">
                  <span class="button__text">32° Evento AWS User Group São Paulo</span>
                  <span class="button__icon">→</span>
                </a>
              </span>
            
          </div>
        </div>
      
    
    

    
      
        

      
    
    
    </div>

      </div>

      
        <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user">2016-2019 - Homelaber Brasil - Valdecir Carvalho</div>
    
  </div>
</footer>

<script src="/assets/main.js"></script>
<script src="/assets/prism.js"></script>


      
    </div>

    
  </body>
</html>
